# Black feather 後台管理系統完整指南

## 📋 目錄

1. [系統概覽](#系統概覽)
2. [前台視角管理](#前台視角管理)
3. [用戶管理](#用戶管理)
4. [審核系統](#審核系統)
5. [數據管理](#數據管理)
6. [系統設定](#系統設定)

---

## 🎯 系統概覽

後台管理系統提供全面的平台管理功能,包括用戶管理、審核流程、數據分析和系統設定。

### 主要功能模塊

- **前台視角** - 模擬司機和乘客的使用體驗
- **審核系統** - 審核司機和乘客的註冊申請
- **用戶管理** - 管理所有用戶帳號和權限
- **訂單管理** - 查看和管理所有訂單
- **收入報表** - 財務數據和收入統計
- **數據分析** - 營運數據和趨勢分析
- **系統設定** - 計費規則和系統配置

---

## 🖥️ 前台視角管理

### 司機前台視角 (`/admin/driver-frontend-view`)

**功能說明:**
以任何已註冊司機的身份查看司機端界面,測試和體驗司機的完整功能。

**可以做什麼:**
- ✅ 查看司機主頁
- ✅ 查看可接訂單
- ✅ 查看訂單歷史
- ✅ 查看收入統計
- ✅ 查看個人資料
- ✅ 體驗完整的司機工作流程

**如何使用:**
1. 從管理員首頁點擊"司機前台視角"
2. 選擇一位已審核通過的司機
3. 點擊"進入司機端視角"
4. 即可以該司機身份體驗系統

**注意事項:**
- 這是唯讀模式,不會影響實際數據
- 只能查看已審核通過的司機
- 可用於測試新功能和檢查用戶體驗

---

### 乘客前台視角 (`/admin/passenger-frontend-view`)

**功能說明:**
以任何已註冊乘客的身份查看乘客端界面,測試和體驗乘客的完整功能。

**可以做什麼:**
- ✅ 查看叫車地圖
- ✅ 模擬叫車流程
- ✅ 查看訂單歷史
- ✅ 查看個人資料
- ✅ 體驗完整的叫車流程

**如何使用:**
1. 從管理員首頁點擊"乘客前台視角"
2. 選擇一位已審核通過的乘客
3. 點擊"進入乘客端視角"
4. 即可以該乘客身份體驗系統

**注意事項:**
- 這是唯讀模式,不會影響實際數據
- 只能查看已審核通過的乘客
- 可用於測試新功能和檢查用戶體驗

---

## 👥 用戶管理

### 司機管理 (`/admin/drivers`)

**功能列表:**
- 📋 查看所有司機列表
- 🔍 搜尋司機(姓名、電話、車牌)
- 🏷️ 篩選司機狀態
  - 全部
  - 待審核
  - 已通過
  - 已拒絕
  - 在線中
- 👁️ 查看司機詳細資料
- ✅ 審核通過司機申請
- ❌ 拒絕司機申請

**司機資訊包含:**
- 基本資料(姓名、電話、身分證)
- 駕照資訊(號碼、到期日)
- 車輛資訊(品牌、型號、車牌、顏色)
- 緊急聯絡人
- 街口帳號資訊
- 統計數據(評分、完成訂單、總收入)
- 工作狀態(離線/在線/忙碌)

---

### 乘客管理 (`/admin/passengers`)

**功能列表:**
- 📋 查看所有乘客列表
- 🔍 搜尋乘客(姓名、電話、信箱)
- 🏷️ 篩選乘客狀態
  - 全部
  - 待審核
  - 已通過
  - 已停用
  - 高活躍
- 👁️ 查看乘客詳細資料
- ✅ 審核通過乘客申請
- 🚫 停用乘客帳號

**乘客資訊包含:**
- 基本資料(姓名、電話、信箱)
- 統計數據(評分、總行程、總消費)
- 帳號狀態
- 驗證狀態
- 註冊時間
- 最後使用時間

---

## 🔍 審核系統

### 司機申請審核 (`/admin/driver-applications`)

**審核流程:**
1. 查看待審核申請列表
2. 點擊"查看詳情"審閱完整資料
3. 選擇"通過"或"拒絕"
4. 拒絕時需輸入原因
5. 系統自動發送通知給申請者

**審核狀態:**
- ⏰ 待審核 (pending)
- 👁️ 審核中 (under_review)
- ✅ 已通過 (approved)
- ❌ 已拒絕 (rejected)

**優先級別:**
- 低 (low)
- 一般 (normal)
- 高 (high)
- 緊急 (urgent)

**審核通過後:**
- ✅ 司機帳號自動啟用
- ✅ 司機可以開始登入接單
- ✅ 系統發送通知給司機
- ✅ 自動創建司機記錄和車輛資料

---

### 乘客申請審核 (`/admin/passenger-applications`)

**審核流程:**
1. 查看待審核申請列表
2. 點擊"查看詳情"審閱完整資料
3. 選擇"通過"或"拒絕"
4. 拒絕時需輸入原因
5. 系統自動發送通知給申請者

**審核通過後:**
- ✅ 乘客帳號自動啟用
- ✅ 乘客可以開始使用叫車服務
- ✅ 系統發送通知給乘客

---

## 📊 數據管理

### 訂單管理 (`/admin/orders`)

**功能:**
- 查看所有訂單
- 訂單狀態監控
- 訂單詳細資訊
- 訂單篩選和搜尋

### 收入報表 (`/admin/revenue`)

**功能:**
- 總收入統計
- 司機收入報表
- 平台收入分析
- 收入趨勢圖表

### 數據分析 (`/admin/analytics`)

**功能:**
- 營運數據儀表板
- 用戶增長趨勢
- 訂單量統計
- 營收分析

---

## ⚙️ 系統設定

### 系統設定 (`/admin/settings`)

**功能:**
- 計費規則設定
- 車型管理
- 系統參數配置
- 通知設定

---

## 🔧 診斷工具

### 數據訪問測試 (`/admin/test-data-access`)

**功能:**
測試管理員對各個數據表的訪問權限,診斷可能的權限問題。

**測試項目:**
- ✅ Supabase 連接狀態
- ✅ driver_applications 表查詢
- ✅ 服務函數調用
- ✅ RLS 政策權限
- ✅ users 表訪問權限

**何時使用:**
- 查詢數據時遇到權限錯誤
- 無法載入申請列表
- 懷疑有資料庫連接問題
- 新部署後的功能驗證

---

## 📱 快速入口

從管理員首頁 (`/admin`) 可以快速訪問所有功能:

### 🎯 前台模擬
- **司機前台視角** - 模擬司機端界面
- **乘客前台視角** - 模擬乘客端界面

### 👥 用戶相關
- **用戶管理** - 管理所有用戶
- **司機管理** - 管理司機帳號
- **乘客管理** - 管理乘客帳號

### 🔍 審核相關
- **司機申請審核** - 審核司機註冊
- **乘客申請審核** - 審核乘客註冊

### 📊 數據相關
- **訂單管理** - 查看所有訂單
- **收入報表** - 財務數據統計
- **數據分析** - 營運數據分析

### ⚙️ 系統相關
- **系統設定** - 配置系統參數
- **數據訪問測試** - 診斷權限問題

---

## 🚀 使用建議

### 日常管理流程

1. **每日檢查:**
   - 查看待審核申請
   - 檢查系統統計數據
   - 查看活躍訂單

2. **定期維護:**
   - 審核用戶申請
   - 檢查用戶反饋
   - 更新系統設定

3. **測試驗證:**
   - 使用前台視角測試新功能
   - 運行診斷工具檢查系統健康
   - 驗證數據訪問權限

### 最佳實踐

1. **審核申請時:**
   - 仔細查看所有必填資料
   - 核對身分證和駕照格式
   - 檢查車輛資訊完整性
   - 拒絕時提供清楚的原因

2. **管理用戶時:**
   - 定期檢查用戶狀態
   - 處理用戶投訴和反饋
   - 監控異常行為

3. **數據分析時:**
   - 關注關鍵指標趨勢
   - 識別潛在問題
   - 優化系統配置

---

## 💡 常見問題

### Q: 如何審核司機申請?
A: 進入"司機申請審核"頁面,點擊"查看詳情"查看申請資料,然後選擇"通過"或"拒絕"。

### Q: 如何查看司機的前台界面?
A: 進入"司機前台視角",選擇一位已審核通過的司機,點擊"進入司機端視角"。

### Q: 如果看不到申請列表怎麼辦?
A: 使用"數據訪問測試"工具診斷問題,檢查控制台日誌查看詳細錯誤信息。

### Q: 審核通過後司機多久可以登入?
A: 立即可以登入。系統會自動啟用帳號並發送通知。

### Q: 可以撤銷審核決定嗎?
A: 可以。在用戶管理頁面可以修改用戶狀態。

---

## 📞 技術支援

如遇到任何問題或需要協助:

1. 查看控制台日誌獲取詳細錯誤信息
2. 使用診斷工具測試系統狀態
3. 檢查資料庫連接和權限配置
4. 聯絡系統開發團隊

---

## 📝 更新日誌

### v1.0.0 (2025-10-03)
- ✅ 新增司機前台視角功能
- ✅ 新增乘客前台視角功能
- ✅ 優化管理員導航結構
- ✅ 增強申請審核流程
- ✅ 添加診斷工具
- ✅ 完善用戶管理功能

---

**Black feather 後台管理系統** - 提供全面、高效的平台管理解決方案
